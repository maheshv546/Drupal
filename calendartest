(function ($, Drupal) {
  Drupal.behaviors.customTooltip = {
    attach: function (context, settings) {
      // Wait for the FullCalendar to be initialized.
      $(document).once('custom-tooltip-init').on('fullCalendarRendered', function () {
        // Access the FullCalendar instance.
        var calendarEl = $('.fullcalendar', context).get(0);
        
        if (calendarEl && calendarEl.fullCalendar) {
          calendarEl.fullCalendar('option', 'eventDidMount', function (info) {
            // Add the title attribute to the event element.
            var eventTitle = info.event.title;
            if (eventTitle) {
              $(info.el).attr('title', eventTitle);

              // Apply jQuery UI tooltip (if available).
              if ($.fn.tooltip) {
                $(info.el).tooltip();
              }
            }
          });
        }
      });

      // Trigger a custom event when FullCalendar is rendered.
      $('.fullcalendar', context).once('custom-tooltip').each(function () {
        $(this).trigger('fullCalendarRendered');
      });
    }
  };
})(jQuery, Drupal);